<%= form_for(@request) do |f| %>

  <fieldset>
    <legend>Richiesta</legend>
    <div class="required">
      <%= f.label :title, 'Titolo:' %>
      <%= f.text_field :title, :class=>:inputText, :size=>10, :maxlength=>100, :disabled=>true %>
    </div>

    <div class="required">
      <%= f.label :description, 'Descrizione:' %>
      <%= f.text_area :description, :class=>:inputTextarea, :rows=>10, :cols=>21, :disabled=>true %>
      <small class="error"><%= @request.errors[:description].join(". ") %></small>
    </div>

    <div class="required">
      <%= f.label :expiration_date, 'Data di scadenza:' %>
      <%= text_field_tag :expiration_date, @request.expiration!=nil ? @request.expiration.strftime("%d/%m/%Y") : '', :class=>:inputText, :size=>10, :maxlength=>100, :disabled=>true %>
      <small class="error"><%= @request.errors[:expiration].join(". ") %></small>
    </div>

  </fieldset>

<% end %>


<%= form_for @proposal, :url => proposal_submission_path do |f| %>
  <%= hidden_field :request, 'id' %>
  <fieldset>
    <legend>Proposta</legend>
    <div class="required">
      <%= f.label :description, 'Descrizione:' %>
      <%= f.text_area :description, :class=>:inputTextarea, :rows=>10, :cols=>21 %>
      <small class="error"><%= @proposal.errors[:description].join(". ") %></small>
    </div>

    <div class="required">
      <%= f.text_field :amount, :class=>:inputText, :size=>10, :maxlength=>100 %>
      <%= f.label :amount, 'Ammontare:' %>
      <small class="error"><%= @proposal.errors[:amount].join(". ") %></small>
    </div>

    <%= submit_tag "invia" %>

  </fieldset>
<% end %>

<ul>
  <%@request.proposals.each do |proposal|%>
    <li>
      <%= proposal.description %>
      <%= proposal.amount %> &euro;
    </li>
  <%end%>
</ul>
